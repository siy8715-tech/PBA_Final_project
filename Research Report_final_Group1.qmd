---
title: |
  \vspace{-1em}
  \textbf{Research Project Report}\
  \large Group 1: Zoe (112077503), Gresa (114077442)
author: ""
format:
  pdf:
    pdf-engine: xelatex
    fontsize: 12pts
    linestretch: 1.15
    mainfont: "Times New Roman"
    geometry: margin=1in
header-includes:
  # paragraph spacing
  - \usepackage{parskip}
  - \setlength{\parskip}{6pt}
  - \setlength{\parindent}{0pt}

  # section formatting
  - \usepackage{titlesec}
  - \titlespacing{\section}{0pt}{12pt}{6pt}
  - \titlespacing{\subsection}{0pt}{10pt}{6pt}
  - \titlespacing{\subsubsection}{0pt}{8pt}{4pt}
  - \titleformat{\section}{\normalfont\bfseries\fontsize{14}{16}\selectfont}{\thesection}{1em}{}
  - \titleformat{\subsection}{\normalfont\bfseries\fontsize{12}{14}\selectfont}{\thesubsection}{1em}{}
  - \titleformat{\subsubsection}{\normalfont\bfseries\fontsize{12}{14}\selectfont}{\thesubsubsection}{1em}{}

  # bullet point spacing (tighter, like sample)
  - \usepackage{enumitem}
  - \setlist[itemize]{topsep=2pt, partopsep=0pt, itemsep=0pt, parsep=0pt, leftmargin=18pt}
  - \setlist[enumerate]{topsep=2pt, partopsep=0pt, itemsep=0pt, parsep=0pt, leftmargin=18pt}

  # table + caption formatting
  - \usepackage{booktabs}
  - \usepackage{caption}
  - \captionsetup{font=small, labelfont=bf}
---

# Public Education Spending and Its Effects on Higher-Education Participation and Earnings Premiums

# 1. Introduction

Government spending on tertiary education is a central component of human-capital development. Across OECD economies, educational attainment decisions shape labor-market outcomes, while public investment can influence access to higher education and the capacity of tertiary institutions to deliver education at scale.

The COVID-19 shock plausibly altered tertiary enrollment decisions because higher education is a discretionary choice and, relative to compulsory schooling, often relies more heavily on household spending and student-aid arrangements. In such settings, enrollment may become more sensitive to short-run income risk and liquidity constraints. Financing regimes that require substantial upfront payments at the point of enrollment may therefore be particularly vulnerable to enrollment shocks, whereas income-contingent loan systems—where students do not pay upfront—may be more resilient (OECD, 2021).

In the post-COVID period, countries also differed markedly in their public funding responses. OECD (2021) documents widespread adjustments in higher-education public budgets in 2020/2021 and highlights that expansions in student support—such as student grants/scholarships and student loans—were common elements of these responses. This cross-country heterogeneity in the intensity of public spending adjustments provides a useful setting to examine whether larger post-COVID spending responses are associated with different trajectories of tertiary enrollment.

This study investigates two interrelated questions:

1.  How relative earnings differ across education levels.
2.  Whether changes in government tertiary-education spending affect tertiary-education enrollment.

# 2. Research Design

To answer these questions, I combine correlational methods with a Difference-in-Differences (DiD) design that exploits cross-country variation in the **2020–2021 change** in per-student government funding for tertiary education across OECD countries. The correlational analysis describes earnings differences across education levels, while the DiD framework compares whether countries with larger **2020–2021 per-student spending increases** exhibit different **post-2021** enrollment trajectories relative to countries with smaller changes. Given that post-COVID funding adjustments may respond to contemporaneous conditions, the DiD estimates are interpreted as differential changes in enrollment trajectories rather than as a clean causal policy experiment.


## 2.1 Identification Strategy

Two empirical strategies are implemented to capture both discrete and continuous dimensions of spending adjustments.

### (1) Difference-in-Differences Design

The first strategy classifies countries into **high-response** and **low-response** groups based on whether their 2020–2021 increase in per-student tertiary-education spending exceeds the sample median. The Difference-in-Differences (DiD) framework compares the evolution of tertiary-enrollment rates between these two groups before and after 2021, the first full year after the initial 2020 shock.

This approach follows the logic of policy evaluation designs in which a subset of units experiences a more substantial treatment response than others. The identifying assumption is that, absent differential spending increases, enrollment trends in high- and low-response countries would have followed similar trajectories.

To examine the validity of the identifying assumption and to characterize dynamic patterns, an event-study specification is also estimated. This event-time framework provides a flexible representation of pre- and post-2021 differences and allows visualization of treatment dynamics, including whether any divergence emerges only after 2021.

Importantly, this design does not require assuming that spending changes are exogenous. Instead, it treats the 2020–2021 spending change as a heterogeneous funding-policy response across countries and examines whether enrollment evolved differently in countries with larger versus smaller adjustments, conditional on fixed effects and pre-trend diagnostics. The results are therefore interpreted as comparative (trajectory) evidence, consistent with the identification caveats discussed in Section 4.3.


### (2) Continuous-Treatment Approach

While the binary DiD design focuses on average differences between country groups, the second strategy analyzes the *magnitude* of spending adjustments. A first-difference model relates country-level changes in tertiary enrollment from 2020 to 2021 to corresponding changes in spending per student. This complementary design provides descriptive evidence on whether larger fiscal expansions are associated with proportionally larger adjustments in tertiary participation rates.

Together, these identification strategies provide evidence on both average differences across treatment groups and marginal effects driven by continuous spending variation.

# 3. Data

The empirical analysis uses a multi-country panel dataset containing annual information on tertiary enrollment ratios, government education spending, and long-run pre-COVID trends. This section describes the data sources, key variables, and sample construction.

## 3.1 Data Sources

In practice, the empirical dataset is constructed from publicly available series accessed via Our World in Data (OWID) Grapher downloads for tertiary gross enrollment ratios and government funding per tertiary student.

The primary variables are obtained from international education and public-expenditure databases:

-   **Tertiary enrollment ratio**: measured as gross tertiary enrollment (% of relevant age cohort).\
-   **Government tertiary-education spending per student**: expressed as public spending per tertiary student (in constant units).\
-   **Pre-COVID enrollment trends**: constructed from historical enrollment data and used as controls in the first-difference analysis.

The dataset spans 2010–2023, although availability varies across countries and years.

## 3.2 Sample Construction

The analytic sample includes countries with non-missing observations for tertiary enrollment and spending variables around the COVID period. Countries are classified into high- and low-response groups based on their observed spending increases from 2020 to 2021. Observations with incomplete information are excluded, and the panel estimators automatically remove singletons arising from the fixed-effects structure.

## 3.3 Key Variables

The analysis focuses on three key variables related to tertiary education outcomes and public investment.

### Outcome

- **Tertiary Enrollment Ratio**: the gross tertiary enrollment rate serves as the primary dependent variable in both the panel and first-difference models.

- **Relative Earnings Index (Tertiary, OECD)**: measures average earnings of tertiary-educated workers relative to individuals with upper-secondary education (upper-secondary = reference). This index is used primarily for contextual interpretation of incentives to pursue higher education.

- **Wage Index by Education Level (Primary baseline)**: a pooled wage-index measure reported for four education levels (primary, lower secondary, upper secondary, tertiary). This measure is used in the earnings-gradient regression in Section 4.5/5.5 and is conceptually distinct from the OECD relative earnings index above.


### Treatment

Two alternative treatment definitions are used: a binary treatment for the Difference-in-Difference analysis and a continuous spending measure for analysis.

-   **Binary treatment assignment** (`Treated_c`): Indicator for countries with an above-median 2020–2021 increase in per-student tertiary spending.\
-   **Post indicator** (`Post_t`): Equals 1 for years ≥ 2021.\
-   **Interaction** (`Treated_c × Post_t`): Captures differential post-2021 enrollment changes.

### Continuous treatment (first-difference, 2020→2021)

- $\Delta Spending_c$: Change in per-student tertiary spending between 2020 and 2021.
- $\Delta Enrollment_c$: Corresponding change in tertiary enrollment between 2020 and 2021.
- Pretrend$_c$: Long-run pre-COVID enrollment trend included as a control in the first-difference model.


| Variable Name | Description | Source |
|----|----|----|
| Enrollment | Gross enrollment ratio for tertiary education (both sexes) | Our World in Data (OWID) |
| Spending | Government expenditure per tertiary student (PPP\$) | Our World in Data (OWID) |
| Earnings | Relative earnings index (Tertiary) | OECD Education at a Glance |
| Treated | Indicator for countries with high post-COVID spending growth | Calculated from OWID |
| Wage_Index | Wage index by education level (Primary/Lower/Upper/Tertiary) | OECD wage ladder files (2019–2020 in this dataset) |


```{r load-data, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(janitor)
library(readxl)
library(httr)
library(knitr)
library(kableExtra)

# ---------------------------------------------------------
# 1) OECD country list
# ---------------------------------------------------------
oecd_iso3 <- c(
  "AUS","AUT","BEL","CAN","CHE","CHL","CZE","DEU","DNK","ESP","EST",
  "FIN","FRA","GBR","GRC","HUN","IRL","ISL","ISR","ITA","JPN","KOR",
  "LTU","LUX","LVA","MEX","NLD","NOR","NZL","POL","PRT","SVK","SVN",
  "SWE","TUR","USA"
)

# ---------------------------------------------------------
# 2) Tertiary enrollment (OWID)
# ---------------------------------------------------------
enroll_raw <- read.csv(
  "https://ourworldindata.org/grapher/primary-secondary-enrollment-completion-rates.csv?v=1&csvType=full&useColumnShortNames=true"
)

enroll <- enroll_raw %>%
  transmute(
    country = Entity,
    code    = Code,
    year    = as.integer(Year),
    enrollment = gross_enrolment_ratio_for_tertiary_education__both_sexes__pct__ger_5t8
  ) %>%
  filter(code %in% oecd_iso3, year >= 2010, year <= 2023)

# ---------------------------------------------------------
# 3) Spending per tertiary student (OWID)
# ---------------------------------------------------------
spend_raw <- read.csv(
  "https://ourworldindata.org/grapher/education-spending.csv?v=1&csvType=full&useColumnShortNames=true&spending_type=per_student&level=tertiary"
)

spend <- spend_raw %>%
  transmute(
    country = Entity,
    code    = Code,
    year    = as.integer(Year),
    spending = initial_government_funding_per_tertiary_student__constant_pppdollar__xunit_pppconst_5t8_fsgov_ffntr
  ) %>%
  filter(code %in% oecd_iso3, year >= 2010, year <= 2023)

# ---------------------------------------------------------
# 4) Tertiary attainment (2019, 2020, 2023)
# ---------------------------------------------------------
attain_2019 <- read_csv(
  "https://raw.githubusercontent.com/siy8715-tech/PBA_Final_project/main/data/tertiary_attainment_2019.csv",
  show_col_types = FALSE
) %>%
  clean_names() %>%
  rename(country = 1, tertiary_attainment = 2) %>%
  mutate(
    country = as.character(country),
    tertiary_attainment = as.numeric(tertiary_attainment),
    year = 2019
  )

attain_2020 <- read_csv(
  "https://raw.githubusercontent.com/siy8715-tech/PBA_Final_project/main/data/tertiary_attainment_2020.csv",
  show_col_types = FALSE
) %>%
  clean_names() %>%
  rename(country = 1, tertiary_attainment = 2) %>%
  mutate(
    country = as.character(country),
    tertiary_attainment = as.numeric(tertiary_attainment),
    year = 2020
  )

url_attain_2023 <- "https://github.com/siy8715-tech/PBA_Final_project/raw/refs/heads/main/data/attainment_2023.xlsx"

tf_attain <- tempfile(fileext = ".xlsx")

invisible(
  suppressMessages(
    suppressWarnings(
      httr::GET(
        url_attain_2023,
        httr::write_disk(tf_attain, overwrite = TRUE)
      )
    )
  )
)

attain_2023 <- readxl::read_excel(tf_attain) %>%
  janitor::clean_names() %>%
  rename(country = 1, tertiary_attainment = 2) %>%
  mutate(
    country = as.character(country),
    tertiary_attainment = as.numeric(tertiary_attainment),
    year = 2023
  )
attain_2019 <- attain_2019 %>%
  mutate(
    country = as.character(country),
    tertiary_attainment = as.numeric(tertiary_attainment)
  )

attain_2020 <- attain_2020 %>%
  mutate(
    country = as.character(country),
    tertiary_attainment = as.numeric(tertiary_attainment)
  )

attainment <- bind_rows(attain_2019, attain_2020, attain_2023)
# ---------------------------------------------------------
# 5) Relative earnings (2019, 2020, 2023)
# ---------------------------------------------------------
earn_2019 <- read_csv(
  "https://raw.githubusercontent.com/siy8715-tech/PBA_Final_project/main/data/relative_earnings_2019.csv",
  show_col_types = FALSE
) %>%
  clean_names() %>%
  rename(country = 1, rel_earnings_tertiary = 2) %>%
  mutate(year = 2019)

earn_2020 <- read_csv(
  "https://raw.githubusercontent.com/siy8715-tech/PBA_Final_project/main/data/relative_earnings_2020.csv",
  show_col_types = FALSE
) %>%
  clean_names() %>%
  rename(country = 1, rel_earnings_tertiary = 2) %>%
  mutate(year = 2020)

url_earn_2023 <- "https://github.com/siy8715-tech/PBA_Final_project/raw/refs/heads/main/data/RelativeEarnings_Copy.xlsx"
tf_earn <- tempfile(fileext = ".xlsx")
invisible(
  suppressMessages(
    suppressWarnings(
      GET(url_earn_2023, write_disk(tf_earn, overwrite = TRUE))
    )
  )
)

earn_2023 <- readxl::read_excel(tf_earn) %>%
  janitor::clean_names() %>%
  rename(country = 1, rel_earnings_tertiary = 2) %>%
  mutate(
    country = as.character(country),
    rel_earnings_tertiary = as.numeric(rel_earnings_tertiary),
    year = 2023
  )

earn_2019 <- earn_2019 %>%
  mutate(
    country = as.character(country),
    rel_earnings_tertiary = as.numeric(rel_earnings_tertiary)
  )

earn_2020 <- earn_2020 %>%
  mutate(
    country = as.character(country),
    rel_earnings_tertiary = as.numeric(rel_earnings_tertiary)
  )


earn <- bind_rows(earn_2019, earn_2020, earn_2023)
# ---------------------------------------------------------
# 6) Summary statistics function
# ---------------------------------------------------------
summarize_vec <- function(x) {
  x <- x[!is.na(x)]
  tibble(
    N = length(x),
    Mean = mean(x),
    SD = sd(x),
    P25 = as.numeric(quantile(x, 0.25)),
    P50 = as.numeric(quantile(x, 0.50)),
    P75 = as.numeric(quantile(x, 0.75))
  )
}

# ---------------------------------------------------------
# 7) Summary statistics table
# ---------------------------------------------------------
library(tidyverse)
library(janitor)
library(readxl)
library(httr)
library(knitr)
library(kableExtra)

summary_table <- bind_rows(
  summarize_vec(enroll$enrollment) %>% mutate(Variable = "Tertiary Enrollment Rate (%)"),
  summarize_vec(spend$spending) %>% mutate(Variable = "Gov. Spending per Student (PPP$)"),
  summarize_vec(earn$rel_earnings_tertiary) %>% mutate(Variable = "Relative Earnings Index (Tertiary)"),
  summarize_vec(attainment$tertiary_attainment) %>% mutate(Variable = "Tertiary Attainment Rate (%)")
) %>%
  select(Variable, N, Mean, SD, P25, P50, P75)

summary_table %>%
  kable(
    digits = 2,
    booktabs = TRUE,
    caption = "Summary Statistics for Key Variables (OECD, 2010–2023 where available)"
  ) %>%
  kable_styling(latex_options = c("striped", "hold_position")) %>%
  footnote(
    general = "Enrollment and spending are computed for OECD countries over 2010–2023 using all non-missing observations. Earnings and attainment are available only for selected years (2019, 2020, and 2023 in this dataset), so their sample sizes are smaller.",
    general_title = "Note: ",
    footnote_as_chunk = TRUE,
    threeparttable = TRUE
  )
```

Table 2 presents summary statistics for the key variables used in the analysis across OECD countries between 2010 and 2023, where data are available. Average tertiary enrollment rates are relatively high, with a mean of approximately **75%**, though substantial cross-country and temporal variation is evident, as reflected in a standard deviation of nearly 20 percentage points. Government spending per tertiary student also exhibits considerable dispersion, with an average of about USD **\$16,500** (PPP-adjusted) and a wide interquartile range, highlighting large differences in public investment levels across OECD education systems.

The relative earnings index for individuals with tertiary education shows marked heterogeneity, with a mean value of **137**, indicating that tertiary-educated workers earn, on average, substantially more than the reference group. However, the high standard deviation underscores significant variation in the magnitude of this earnings premium across countries and years. Finally, tertiary attainment rates average roughly **36%**, with moderate dispersion, suggesting meaningful differences in the share of the adult population holding a tertiary degree. Overall, these statistics point to substantial heterogeneity in both educational outcomes and economic returns to education across OECD countries, providing important context for the subsequent econometric analysis.

# 4. Methodology {#sec-methodology}

This section presents the empirical models used to estimate the relationship between government spending and tertiary enrollment. Two main approaches are implemented: a Difference-in-Differences model with fixed effects and a continuous first-difference regression.

## 4.1 Baseline Difference-in-Differences Specification

The primary estimating equation is:

$$
Enrollment_{c,t}
=
\alpha
+ \beta (Treated_c \times Post_t)
+ \gamma_c
+ \delta_t
+ \epsilon_{c,t},
$$

where:
- $Enrollment_{c,t}$ is the gross tertiary enrollment rate for country $c$ in year $t$.
- $Treated_c$ is a binary indicator based on the 2020→2021 change in government funding per tertiary student.
  Let $\Delta Spending_c = Spending_{c,2021} - Spending_{c,2020}$ (spend_change). Then
  $Treated_c = 1\{\Delta Spending_c > median(\Delta Spending)\}$,
  meaning treated countries are those with an above-median increase in per-student tertiary spending between 2020 and 2021
  (strictly greater than the sample median).
- $Post_t$ equals 1 for years $t \ge 2021$ and 0 otherwise (post = 1{year >= 2021}), so the post period starts in 2021.
- $\gamma_c$ are country fixed effects that absorb time-invariant differences across countries.
- $\delta_t$ are year fixed effects that account for global shocks and common time trends. Standard errors are clustered at the country level.
- The coefficient $\beta$ captures the differential post-2021 change in tertiary enrollment for high-response countries relative to low-response countries.


## 4.2 Event-Study Specification

To examine pre-treatment alignment and treatment dynamics, a flexible event-time model is estimated:

$$
Enrollment_{c,t}
=
\alpha
+
\sum_{k \neq -1}
\beta_k \cdot \mathbf{1}(t - 2021 = k)\cdot Treated_c
+ \gamma_c
+ \delta_t
+ \epsilon_{c,t}.
$$

The coefficients $\beta_k$ trace annual differences between treated and control countries relative to the year immediately preceding 2021. This specification enables visualization of whether enrollment trends diverge only after the spending shock.

### 4.3 Interpretation and identification caveats

Two features of the treatment measure motivate a cautious interpretation of the estimated short-run relationships.

First, the main spending variable is measured on a per-student basis. Because per-student spending mechanically equals total public funding divided by the number of tertiary students, changes in enrollment (or the size of the enrolled population) can affect the per-student measure even when total spending is unchanged. This mechanical link implies that short-run movements in enrollment may partly show up as movements in “spending per student,” complicating causal interpretation.

Second, post-COVID spending adjustments are plausibly policy responses to contemporaneous conditions. In particular, governments may increase per-student funding in response to declining enrollment or broader fiscal and institutional pressures. Consistent with this possibility, the first-difference estimates are interpreted as descriptive evidence and may reflect reactive policy behavior rather than a causal effect of spending on enrollment.

Accordingly, the DiD and event-study specifications are best viewed as testing whether enrollment trajectories differ systematically between countries with larger versus smaller 2020–2021 per-student spending increases, rather than as a clean policy-experiment setting.


## 4.4 Continuous First-Difference Model

To assess whether the size of spending adjustments relates to short-run enrollment changes, a first-difference regression is estimated:

$$
\Delta Enrollment_c
=
\alpha
+ \beta \, \Delta Spending_c
+ \theta \, Pretrend_c
+ \epsilon_c.
$$

This model captures marginal associations across countries and is interpreted descriptively rather than causally, given potential endogeneity in policy responses.

## 4.5 Linear Regression Specification: The Earnings Gradient

To quantify the relationship between educational attainment and relative income, this study analyzes a multiple linear regression model using a categorical approach. This specification treats different levels of education as discrete "steps" on an earnings ladder, identifying the wage premium associated with each education category relative to the primary-education baseline.

The model is specified as follows:

$\text{Relative Wage}_i = \beta_0 + \beta_1(\text{Lower Secondary})_i+ \beta_2(\text{Upper Secondary})_i + \beta_3(\text{Tertiary})_i + \varepsilon_i.$

-   $\beta_0$ (Intercept): Represents the baseline reference group, **Primary Education**. All other coefficients measure the wage increase relative to this starting point.
-   $\beta_1$ (Lower Secondary): The coefficient representing the average change in relative wage for individuals who have completed lower secondary education compared to the primary baseline.
-   $\beta_2$ (Upper Secondary): The coefficient representing the wage premium for upper secondary completion.
-   $\beta_3$ (Tertiary): The coefficient representing the wage premium associated with completing tertiary education relative to the primary education baseline, capturing the total earnings differential between individuals with tertiary education and those with only primary education..
-   $\epsilon_i$ (Error Term): Captures the residual variance in wages not explained by the educational levels included in the model.

The specification quantifies wage premiums across education levels relative to the baseline, and the overall explanatory power of educational attainment for wage variation. These values indicate how much of the global wage disparity can be explained purely by the "type" of education an individual possesses. While the coefficients are defined relative to the primary baseline, incremental differences between adjacent education levels can be assessed by comparing coefficients (e.g., $\beta_2$ − $\beta_1$ for upper vs lower secondary).

## 4.6 Summary of Empirical Approach

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(knitr)
library(kableExtra)

methodology_data <- data.frame(
  Method = c(
    "Difference-in-Differences (DiD)", 
    "Event Study Analysis", 
    "First-Difference Regression",
    "Earnings Gradient (OLS)"
  ),
  Purpose = c(
  "Estimate the differential post-2021 change in enrollment for high-response vs low-response countries (two-way fixed effects DiD).",
  "Assess pre-trends and visualize dynamic differences in enrollment around 2021 (event-time coefficients).",
  "Describe the cross-country association between 2020→2021 changes in spending and enrollment (first-difference).",
  "Describe the earnings gradient across education levels using a pooled wage index."
),
  Key_Variables = c(
    "Treated, Post, Enrollment", 
    "Year Dummies, Treated, Enrollment", 
    "Δ Spending, Δ Enrollment",
    "Primary, Lower Sec, Upper Sec and Tertiary"
  )
)

kable(methodology_data, 
      col.names = c("Method", "Purpose", "Key Variables"),
      booktabs = TRUE, 
      caption = "Summary of Research Methodology and Identification Strategy") %>%
  kable_styling(latex_options = c("striped", "hold_position", "scale_down")) %>%
  column_spec(1, width = "3.5cm", bold = TRUE) %>%
  column_spec(2, width = "7.5cm") %>%
  column_spec(3, width = "3.5cm")
```

Together, these models provide a coherent framework for evaluating whether post-COVID education-spending responses translated into changes in tertiary participation.

# 5. Results {#sec-results}

This section presents descriptive evidence on changes in tertiary enrollment and government spending, followed by the main empirical results using the Difference-in-Differences and continuous first-difference approaches. The presentation follows a structure common in applied empirical work: descriptive patterns first, then model-based results.

```{r setup-results, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(fixest)
library(broom)

# 1. Load OECD data 
enroll_raw <- read.csv(
  "https://ourworldindata.org/grapher/primary-secondary-enrollment-completion-rates.csv?v=1&csvType=full&useColumnShortNames=true"
)

spend_raw <- read.csv(
  "https://ourworldindata.org/grapher/education-spending.csv?v=1&csvType=full&useColumnShortNames=true&spending_type=per_student&level=tertiary"
)

oecd_iso3 <- c(
  "AUS","AUT","BEL","CAN","CHE","CHL","CZE","DEU","DNK","ESP","EST",
  "FIN","FRA","GBR","GRC","HUN","IRL","ISL","ISR","ITA","JPN","KOR",
  "LTU","LUX","LVA","MEX","NLD","NOR","NZL","POL","PRT","SVK","SVN",
  "SWE","TUR","USA"
)

# 2. Select variables
enroll <- enroll_raw %>%
  transmute(
    entity = Entity,
    code   = Code,
    year   = as.integer(Year),
    enroll_ratio =
      gross_enrolment_ratio_for_tertiary_education__both_sexes__pct__ger_5t8
  )

spend <- spend_raw %>%
  transmute(
    entity = Entity,
    code   = Code,
    year   = as.integer(Year),
    spend_tertiary =
      initial_government_funding_per_tertiary_student__constant_pppdollar__xunit_pppconst_5t8_fsgov_ffntr
  )

# 3. Build panel 
panel_all <- enroll %>%
  inner_join(spend, by = c("entity","code","year")) %>%
  filter(code %in% oecd_iso3, year >= 2010, year <= 2023) %>%
  arrange(code, year)

# 3b. Compute pretrend (2010–2019 enrollment slope for each country) 

pretrend_df <- panel_all %>%
  filter(year >= 2010, year <= 2019) %>%   # choose stable pre-COVID window
  group_by(code) %>%
  do({
    mod <- lm(enroll_ratio ~ year, data = .)
    tibble(pretrend = coef(mod)[2])        # slope = yearly change before 2020
  }) %>%
  ungroup()

# 4. 2020→2021 differences 

panel_20_21 <- panel_all %>%
  filter(year %in% c(2020, 2021)) %>%
  select(code, entity, year, enroll_ratio, spend_tertiary) %>%
  pivot_wider(
    names_from  = year,
    values_from = c(enroll_ratio, spend_tertiary),
    names_glue  = "{.value}_{year}"
  ) %>%
  mutate(
    enroll_change = enroll_ratio_2021 - enroll_ratio_2020,
    spend_change  = spend_tertiary_2021 - spend_tertiary_2020
  )

# median-based treatment assignment
median_spend_change <- median(panel_20_21$spend_change, na.rm = TRUE)

panel_20_21 <- panel_20_21 %>%
  mutate(
    treated = ifelse(spend_change > median_spend_change, 1, 0)
  ) %>%
  left_join(pretrend_df, by = "code")

# 5. DiD panel with treatment 
panel_did <- panel_all %>%
  left_join(panel_20_21 %>% distinct(code, treated), by = "code") %>%
  filter(!is.na(treated)) %>%
  mutate(
    post = ifelse(year >= 2021, 1, 0)
  )

# 6. DiD model ---------------------------------------------------------
did_model <- feols(
  enroll_ratio ~ treated * post | code + year,
  cluster = "code",
  data = panel_did
)

# 7. Event-study model -------------------------------------------------
panel_did <- panel_did %>%
  mutate(rel_year = year - 2021)

event_study_model <- feols(
  enroll_ratio ~ i(rel_year, treated, ref = -1) | code + year,
  cluster = "code",
  data = panel_did
)

# 8. First-difference model -------------------------------------------
fd_model <- lm(enroll_change ~ spend_change + pretrend, data = panel_20_21)


```

## 5.1 Descriptive Patterns

To motivate the analysis, @fig-trends displays average tertiary-enrollment trajectories for high-response and low-response countries, where high-response countries are those with above-median increases in per-student tertiary-education spending between 2020 and 2021.

Prior to 2021, the two groups display broadly similar movements in average enrollment, with no clear and persistent divergence. Around the onset of the pandemic, the gap between groups widens from 2019 to 2020, as the high-response group’s average enrollment increases more. By 2021, both groups rise further, but the difference in raw group means slightly narrows relative to 2020. These descriptive patterns are based on unconditional group averages and do not incorporate uncertainty or compositional differences; the subsequent DiD and event-study estimates formally assess whether post-2021 differential changes are statistically distinguishable from zero once country and year fixed effects are included.

```{r fig-trends, echo=FALSE, message=FALSE, warning=FALSE,fig.cap="Average tertiary enrollment for high-response and low-response OECD countries."}

library(scales)

plot_df <- panel_all %>%
  left_join(panel_20_21 %>% distinct(code, treated), by = "code") %>%
  filter(!is.na(treated), year <= 2021) %>%
  group_by(year, treated) %>%
  summarise(avg_enroll = mean(enroll_ratio, na.rm = TRUE), .groups = "drop") %>%
  mutate(
    treated_lbl = factor(
      treated,
      levels = c(0, 1),
      labels = c("Low-response", "High-response")
    )
  )

ggplot(plot_df, aes(x = year, y = avg_enroll, color = treated_lbl)) +
  geom_line(linewidth = 1.1) +
  geom_vline(xintercept = 2021, linetype = "dashed") +
  scale_x_continuous(limits = c(2010, 2021), breaks = seq(2010, 2021, by = 2)) +
  labs(
    x = "Year",
    y = "Average Tertiary Enrollment Ratio",
    color = "Spending response group",
    title = "Enrollment Trends by Spending-Response Group"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

```

## 5.2 Difference-in-Differences Estimates

@tbl-did-model reports the baseline Difference-in-Differences estimates described in Section 4 (Methodology). The coefficient on the interaction term: $$Treated_c \times Post_t$$

captures the differential change in tertiary-enrollment levels for high-response countries relative to low-response countries after 2021.

The estimated effect is small and statistically insignificant, indicating that post-2021 enrollment changes are not statistically distinguishable between high-response and low-response countries in this specification. Because enrollment decisions are often made with a lag relative to budgetary changes, the estimates presented here should be interpreted as short-run effects rather than long-run impacts of public funding adjustments. This finding aligns with the descriptive patterns in Section 5.1.

```{r , echo=FALSE, message=FALSE, warning=FALSE}
#| label: tbl-did-model
#| tbl-cap: "Difference-in-Differences estimates for 2021+ vs pre-2021 enrollment levels."

knitr::kable(
  tidy(did_model, conf.int = TRUE),
  digits = 5,
  format = "latex",
  booktabs = TRUE
)
```

## 5.3 Event-Study Dynamics

To examine dynamic treatment effects and assess the parallel-trends assumption more explicitly, @fig-event-study plots the coefficients from the event-time specification introduced in Section 4 (Methodology).

Pre-treatment coefficients fluctuate around zero with wide confidence intervals, providing no indication of systematic divergence prior to 2021. Post-treatment coefficients also remain close to zero and statistically indistinguishable from pre-treatment values.

Taken together, the event-study results indicate no statistically distinguishable divergence in enrollment trajectories after 2021 between high-response and low-response countries, within the precision of the estimates.

```{r fig-event-study, echo=FALSE, message=FALSE, warning=FALSE,fig.cap="Event-study coefficients relative to 2021 (reference year = 2020)."}

iplot(
  event_study_model,
  xlab = "Years Relative to 2021",
  ylab = "Effect on Enrollment Ratio",
  main = "Event Study: Post-COVID Spending Response"
)
```

## 5.4 Continuous First-Difference Estimates

The first-difference model estimated is:

$$
\Delta Enrollment_c = \alpha + \beta\,\Delta Spending_c + \theta\,Pretrend_c + \epsilon_c.
$$

Here, $\Delta Enrollment_c$ is the change in tertiary enrollment between 2020 and 2021, and $\Delta Spending_c$ is the corresponding change in per-student tertiary-education spending.

The estimated coefficient on spending change is **negative and marginally significant at the 10% level**. Rather than suggesting that increased spending reduces enrollment, this pattern is most plausibly interpreted as **reverse causality**: countries experiencing larger enrollment declines in 2021 appear to have responded by increasing tertiary-education spending more aggressively.

This interpretation is consistent with the absence of positive effects in the DiD and event-study analyses.

```{r, echo=FALSE, message=FALSE, warning=FALSE}
#| label: tbl-fd-model
#| tbl-cap: "Regression of 2021–2020 enrollment changes on spending changes."
knitr::kable(
  tidy(fd_model, conf.int = TRUE),
  digits = 5,
  format = "latex",
  booktabs = TRUE
)
```

## 5.5 The Interaction of Attainment and the Earnings Gradient

To quantify the economic “steps” of the earnings ladder, this study applies a linear regression to pooled OECD data from 2019 and 2020, treating educational attainment as a set of discrete categories.

```{r, echo=FALSE, message=FALSE, warning=FALSE}

# ----------------------------------------------------
# 0. Libraries
# ----------------------------------------------------
library(tidyverse)
library(broom)
library(knitr)
library(kableExtra)

# ----------------------------------------------------
# 1. Function to process wage data (2019 & 2020)
# ----------------------------------------------------
process_data <- function(path, yr) {
  
  raw <- read.csv(path, skip = 7, header = FALSE, fileEncoding = "latin1")
  
  clean <- raw[, 1:5]
  colnames(clean) <- c(
    "country",
    "Primary",
    "Lower_Sec",
    "Upper_Sec",
    "Tertiary"
  )
  
  clean %>%
    mutate(
      across(
        c(Primary, Lower_Sec, Upper_Sec, Tertiary),
        ~ as.numeric(gsub("[^0-9.]", "", as.character(.)))
      )
    ) %>%
    mutate(Year = yr)
}

# ----------------------------------------------------
# 2. Load and combine wage data
# ----------------------------------------------------
w19_full <- process_data(
  "https://raw.githubusercontent.com/siy8715-tech/PBA_Final_project/88e1bfbe759f94862d27c4301016f519d2a95dbd/data/Wages.2019.csv",
  2019
)

w20_full <- process_data(
  "https://raw.githubusercontent.com/siy8715-tech/PBA_Final_project/88e1bfbe759f94862d27c4301016f519d2a95dbd/data/Wages.2020.csv",
  2020
)

full_ladder_data <- bind_rows(w19_full, w20_full)

# ----------------------------------------------------
# 3. Reshape to long format
# ----------------------------------------------------
full_ladder_data <- full_ladder_data %>%
  pivot_longer(
    cols = c(Primary, Lower_Sec, Upper_Sec, Tertiary),
    names_to = "Education_Level",
    values_to = "Wage_Index"
  ) %>%
  filter(!is.na(Wage_Index))

# ----------------------------------------------------
# 4. Define education ladder (CRITICAL)
# ----------------------------------------------------
full_ladder_data$Education_Level <- factor(
  full_ladder_data$Education_Level,
  levels = c("Primary", "Lower_Sec", "Upper_Sec", "Tertiary"),
  labels = c(
    "Primary Education",
    "Lower Secondary Education",
    "Upper Secondary Education",
    "Tertiary Education"
  )
)

full_ladder_data$Education_Level <- relevel(
  full_ladder_data$Education_Level,
  ref = "Primary Education"
)

# ----------------------------------------------------
# 5. Visualization
# ----------------------------------------------------
ggplot(
  full_ladder_data,
  aes(x = Education_Level, y = Wage_Index, fill = Education_Level)
) +
  geom_boxplot(alpha = 0.7, outlier.color = "red") +
  stat_summary(fun = mean, geom = "point", shape = 18, size = 3, color = "white") +
  scale_fill_manual(values = c("#c0392b", "#e67e22", "#7f8c8d", "#2980b9")) +
  theme_minimal() +
  labs(
    title = "Wages and Four Education Levels",
    x = "Education Level",
    y = "Wage Index"
  ) +
  theme(
    legend.position = "none",
    axis.text.x = element_text(angle = 20, hjust = 1, size = 10)
  )
# ----------------------------------------------------
# 6. Earnings ladder regression (Table 6)
# ----------------------------------------------------
ladder_model <- lm(
  Wage_Index ~ Education_Level,
  data = full_ladder_data
)

model_stats <- glance(ladder_model)
r_val  <- round(sqrt(model_stats$r.squared), 3)
r2_val <- round(model_stats$r.squared, 3)

tidy(ladder_model) %>%
  mutate(term = recode(
    term,
    "(Intercept)" = "Baseline: Primary Education",
    "Education_LevelLower Secondary Education" = "Lower Secondary Effect",
    "Education_LevelUpper Secondary Education" = "Upper Secondary Effect",
    "Education_LevelTertiary Education" = "Tertiary Degree Premium"
  )) %>%
  kable(
    digits = 2,
    booktabs = TRUE,
    caption = paste(
      "Regression Analysis of the Earnings Ladder",
      "(R =", r_val, "| R-squared =", r2_val, ")"
    )
  ) %>%
  kable_styling(latex_options = c("striped", "hold_position"))


```

Table 6 presents the results of a linear regression estimating an earnings “ladder” across four education levels, using primary education as the baseline category. The results confirm a strong and highly structured relationship between educational attainment and the wage index across OECD observations. The estimated correlation between education level and the wage index is high (R = 0.876), and the model explains a substantial share of variation (R² = 0.768).

Note that this regression uses a pooled wage-index measure with primary education as the reference category, which is distinct from the OECD relative earnings index (tertiary vs upper-secondary) described in Section 3.3.

Descriptively, the point estimates suggest that the incremental gain between lower and upper secondary attainment is limited in this pooled sample. Relative to individuals with primary education, completing lower secondary education is associated with a large and statistically significant increase in the wage index. In contrast, the coefficient on upper secondary education is small and not statistically significant relative to the primary baseline. Importantly, assessing whether upper secondary delivers additional returns beyond lower secondary requires a direct comparison of the two coefficients (i.e., testing $H_0: \beta_{UpperSec} = \beta_{LowerSec}$).



## 5.6 Earnings Incentives and Enrollment Responses

The combined evidence from the earnings analysis and the enrollment regressions reveals an important distinction between long-run incentives and short-run behavioral responses. On the one hand, the earnings-gradient analysis documents a large and statistically significant wage-index premium associated with tertiary education. The wage index rises sharply with educational attainment, confirming that higher education continues to offer substantial long-term labor-market returns across OECD countries.

On the other hand, the enrollment results indicate that these strong earnings incentives did not translate into an immediate post-COVID increase in tertiary participation, even in countries that implemented larger increases in public spending. This apparent disconnect suggests that short-run enrollment decisions are not driven solely by expected lifetime earnings. Instead, enrollment behavior appears to be influenced by factors such as liquidity constraints, uncertainty about future labor-market conditions, institutional capacity, and cohort-specific dynamics. These findings are consistent with a framework in which the economic returns to education operate over a long horizon, while enrollment decisions respond sluggishly to short-term policy changes. Even when expected earnings premiums remain high, students may delay or forgo enrollment in periods of heightened uncertainty, particularly following large macroeconomic shocks such as the COVID-19 pandemic.

Overall, the results imply that while earnings incentives provide a strong motivation for tertiary education in the long run, short-run fluctuations in public spending are unlikely to generate immediate enrollment responses. This helps reconcile the persistence of large earnings premiums with the absence of short-run enrollment effects observed in the Difference-in-Differences and first-difference analyses.

## **5.7 Summary of Findings**

Across descriptive comparisons, Difference-in-Differences estimation, event-study analysis, and the first-difference regression, the results do not provide evidence of a statistically distinguishable short-run increase in tertiary enrollment associated with larger post-COVID increases in per-student public funding. Countries that experienced a larger 2020–2021 increase in government funding per tertiary student did not exhibit clearly different post-2021 enrollment trajectories relative to countries with smaller spending increases. Consistent with this pattern, both the DiD interaction estimate and the event-study coefficients are small and statistically indistinguishable from zero, with confidence intervals that include both modest positive and negative effects.

At the same time, the descriptive earnings analysis highlights a persistent and substantial earnings premium associated with higher educational attainment across OECD countries. Relative earnings rise sharply with education level, indicating strong long-run labor-market incentives for tertiary education even though short-run enrollment responses to public funding changes are muted.

Taken together, the findings suggest that the post-COVID increase in per-student tertiary-education funding is unlikely to generate immediate gains in enrollment. The negative association observed in the first-difference model is best interpreted as reverse causality, reflecting governments’ policy responses to short-run enrollment changes rather than a causal effect of higher spending on participation.

# 6. Discussion & Conclusion

This study analyzes the relationship between tertiary education, labor-market outcomes, and government education spending across OECD countries, with a particular focus on the post-COVID period. The analysis combined descriptive earnings comparisons with Difference-in-Differences and first-difference approaches to assess whether increases in public spending translated into higher tertiary enrollment. First, the results confirm the presence of strong positive earnings gradients across education levels. Individuals with tertiary education consistently earn substantially more than those with lower levels of educational attainment, reinforcing the long-standing view that higher education remains a valuable investment in terms of long-run labor-market returns. These findings suggest that the economic incentives to pursue tertiary education remain robust across OECD economies.

Second, the analysis finds no evidence of an immediate short-run increase in tertiary enrollment following larger post-COVID increases in government spending. Neither the Difference-in-Differences estimates nor the event-study analysis indicates a statistically significant positive enrollment response in high-spending countries. Moreover, the negative association observed in the first-difference model is more consistent with reactive policy behavior than with a causal effect of spending on enrollment. Specifically, governments appear to have increased tertiary education spending in response to declining enrollment, rather than higher spending inducing new enrollment.

Taken together, these findings highlight the joint role of policy responses and individual decision-making in shaping human-capital outcomes. While public investment in tertiary education may be significant for maintaining quality, access, and institutional stability, enrollment decisions appear to respond slowly and are likely influenced by longer-term factors such as demographic trends, expectations about future labor markets, and institutional capacity constraints. Short-term spending increases alone may therefore be insufficient to generate immediate participation gains.

This study is subject to several limitations. The analysis relies on aggregate country-level data and a relatively short post-COVID time horizon, which may limit the ability to detect longer-run enrollment effects. In addition, the treatment definition captures spending changes rather than specific policy reforms, which may vary in effectiveness across countries. Future research could extend this analysis by using micro-level OECD data, longer post-pandemic panels, or more detailed policy measures to better isolate causal mechanisms. Such extensions would help clarify how different forms of education spending affect access, attainment, and long-term labor-market outcomes.

# References

1.  OECD. (2021). *The state of higher education: One year into the COVID-19 pandemic*. OECD Publishing.

2.  OECD. (2020). *To what level have adults studied?* OECD. https://www.oecd.org/en/publications/2021/09/education-at-a-glance-2021_dd45f55e/full-report/component-8.html#figure-d1e3320

3.  OECD. (2021, September 21). *What are the earnings advantages from education?* OECD. https://www.oecd.org/en/publications/education-at-a-glance-2021_b35a14e5-en/full-report/component-11.html#chapter-d1e6717

4.  OECD. (2022, October 3). *What are the earnings advantages from education?* OECD. https://www.oecd.org/en/publications/education-at-a-glance-2022_3197152b-en/full-report/component-11.html#chapter-d1e5416
